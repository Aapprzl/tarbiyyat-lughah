@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Vibrant Emerald & Amber Palette */
  --color-primary: #10b981; /* Emerald-500 */
  --color-primary-dark: #047857; /* Emerald-700 */
  --color-secondary: #14b8a6; /* Teal-500 */

  /* Backgrounds */
  --color-bg-main: #fcfbf9; /* Warm Paper */
  --color-bg-sidebar: #ffffff;
  --color-bg-card: #ffffff;
  --color-bg-hover: #f3f4f6; /* New: Global Hover */
  --color-bg-muted: #f9fafb; /* New: Subtle Backgrounds */
  --color-bg-surface: #ffffff; /* New: Generic Surface */

  /* Typography */
  --color-text-main: #334155; /* Slate-700 (Softer than #1f2937) */
  --color-text-muted: #6b7280;
  --color-text-light: #e5e7eb; /* For sidebar */
  --color-text-highlight: #0f766e; /* Teal-700 */

  /* Borders & Shadows */
  --color-border: #e2e4e7;
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-card: 0 4px 12px rgba(0, 0, 0, 0.05);
  --shadow-premium: 0 10px 30px -5px rgba(0, 0, 0, 0.05);

  /* Fonts */
  --font-arabic: "Cairo", sans-serif;
  --font-latin: "Plus Jakarta Sans", sans-serif;

  /* Arabic Font Customization (Controlled by Admin) */
  --font-arabic-title-size: 2.25rem; /* text-4xl fallback */
  --font-arabic-content-size: 1.25rem; /* text-xl fallback */
  --font-arabic-sidebar-size: 1.5rem; /* text-2xl fallback */
  --font-arabic-sidebar-content-size: 1.125rem; /* text-lg fallback */
  --font-arabic-index-topic-size: 1.25rem; /* text-xl fallback */
}

/* Dark Mode Tokens */
[data-theme="dark"] {
  --color-primary: #34d399; /* Emerald-400 */
  --color-primary-dark: #10b981; /* Emerald-500 */
  --color-secondary: #2dd4bf; /* Teal-400 */

  --color-bg-main: #131f24; /* Duolingo Midnight */
  --color-bg-sidebar: #202f36; /* Lighter Midnight */
  --color-bg-card: #202f36;
  --color-bg-hover: #37464f; /* Interaction */
  --color-bg-muted: #18252a; /* Subtle Surface */
  --color-bg-surface: #202f36;

  --color-text-main: #ffffff; /* Pure White */
  --color-text-muted: #afbacc; /* Cool Blue-Gray */
  --color-text-light: #e5e7eb;
  --color-text-highlight: #5eead4; /* Teal-300 */

  --color-border: #37464f; /* Matching Hover */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.5);
  --shadow-card: 0 4px 12px rgba(0, 0, 0, 0.4);
  --shadow-premium: 0 10px 30px -5px rgba(0, 0, 0, 0.5);
}

html {
  overflow-y: scroll; /* Force scrollbar to prevent layout shift */
}

body {
  background-color: var(--color-bg-main);
  color: var(--color-text-main);
  font-family: var(--font-latin), sans-serif;
  margin: 0;
  transition:
    background-color 0.3s ease,
    color 0.3s ease;
  position: relative;
}

body::before {
  content: "";
  fixed: top 0 left 0;
  position: fixed;
  width: 100vw;
  height: 100vh;
  top: 0;
  left: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  opacity: 0.035;
  pointer-events: none;
  z-index: -1;
}

[data-theme="dark"] body::before {
  opacity: 0.06;
}

/* Force Form Elements to inherit or use variable */
button,
input,
select,
textarea {
  font-family: var(--font-latin), sans-serif !important;
}

/* Fix for AutoFill messing up font size */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
  font-size: 1rem !important;
  font-family: var(--font-latin), sans-serif !important;
  -webkit-text-fill-color: var(--color-text-main) !important;
  transition: background-color 5000s ease-in-out 0s; /* Prevent background color change */
}

h1,
h2,
h3,
h4 {
  color: var(--color-primary-dark);
  font-weight: 700;
  line-height: 1.2;
}

.arabic-text {
  font-family: var(--font-arabic) !important;
  direction: rtl;
}

.arabic-title {
  font-family: var(--font-arabic) !important;
  font-size: var(--font-arabic-title-size) !important;
}

.arabic-content {
  font-family: var(--font-arabic) !important;
  font-size: var(--font-arabic-content-size) !important;
}
.arabic-sidebar {
  font-family: var(--font-arabic) !important;
  font-size: var(--font-arabic-sidebar-size) !important;
}

.arabic-sidebar-content {
  font-family: var(--font-arabic) !important;
  font-size: var(--font-arabic-sidebar-content-size) !important;
}

/* Explicit Utilities to bypass Tailwind Config lag */
.font-arabic {
  font-family: var(--font-arabic) !important;
}

.dir-rtl {
  direction: rtl;
  text-align: right;
}

/* Prose & RichText RTL Fixes */
.prose .dir-rtl,
.prose [dir="rtl"] {
  text-align: right;
  font-family: var(--font-arabic);
}

.prose .dir-rtl ul,
.prose [dir="rtl"] ul,
.prose .dir-rtl ol,
.prose [dir="rtl"] ol {
  padding-left: 0;
  padding-right: 1.625em;
}

.prose .dir-rtl li,
.prose [dir="rtl"] li {
  padding-left: 0;
  padding-right: 0.375em;
}

.prose .dir-rtl blockquote,
.prose [dir="rtl"] blockquote {
  border-left: none;
  border-right: 4px solid var(--color-primary);
  padding-left: 0;
  padding-right: 1em;
}

.font-sans {
  font-family:
    var(--font-latin), ui-sans-serif, system-ui, sans-serif !important;
}

.arabic-index-topic {
  font-family: var(--font-arabic);
  font-size: var(--font-arabic-index-topic-size) !important;
  direction: rtl;
  text-align: left;
  line-height: 1.4;
}

/* Scrollbar Polish */
::-webkit-scrollbar {
  width: 8px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

/* Custom Dot Grid Background */
/* Custom Dot Grid Background - Removed as per user request */
/* .bg-dot-grid {
  background-image: radial-gradient(circle, #cbd5e1 1px, transparent 1px);
  background-size: 16px 16px;
}

[data-theme="dark"] .bg-dot-grid {
  background-image: radial-gradient(circle, #37464f 1px, transparent 1px);
}

@media (min-width: 768px) {
  .bg-dot-grid {
    background-image: radial-gradient(circle, #cbd5e1 1.5px, transparent 1.5px);
    background-size: 24px 24px;
  }

  [data-theme="dark"] .bg-dot-grid {
    background-image: radial-gradient(circle, #37464f 1.5px, transparent 1.5px);
  }
} */

/* Shimmer Animation */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(300%);
  }
}

.animate-shimmer {
  animation: shimmer 2s infinite linear;
}

/* Bounce Animation */
@keyframes bounce-short {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-5px);
  }
}

.animate-bounce-short {
  animation: bounce-short 1s ease-in-out infinite;
}

/* 3D Transform Utilities for Games */
.perspective-1000 {
  perspective: 1000px;
}

.preserve-3d {
  transform-style: preserve-3d;
}

.backface-hidden {
  backface-visibility: hidden;
}

.rotate-y-180 {
  transform: rotateY(180deg);
}
